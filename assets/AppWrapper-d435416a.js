import{r as d,u as E,j as o,F,a as b,b as O,L as U,O as Y,Q as $}from"./index-b1a4e9be.js";import{o as q,d as M,c as W,a as G,s as P,b as Q,e as z}from"./dbMethods-44866728.js";import{B as X,L as J}from"./index-cd93988e.js";import{u as x}from"./index-1d2d4d56.js";function C(n,e,c){var r,s,l,m,i;e==null&&(e=100);function t(){var a=Date.now()-m;a<e&&a>=0?r=setTimeout(t,e-a):(r=null,c||(i=n.apply(l,s),l=s=null))}var u=function(){l=this,s=arguments,m=Date.now();var a=c&&!r;return r||(r=setTimeout(t,e)),a&&(i=n.apply(l,s),l=s=null),i};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(i=n.apply(l,s),l=s=null,clearTimeout(r),r=null)},u}C.debounce=C;var L=C;function K(n){let{debounce:e,scroll:c,polyfill:r,offsetSize:s}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const l=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[m,i]=d.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),t=d.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:m}),u=e?typeof e=="number"?e:e.scroll:null,a=e?typeof e=="number"?e:e.resize:null,h=d.useRef(!1);d.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,v,g]=d.useMemo(()=>{const f=()=>{if(!t.current.element)return;const{left:T,top:H,width:j,height:B,bottom:D,right:I,x:A,y:_}=t.current.element.getBoundingClientRect(),y={left:T,top:H,width:j,height:B,bottom:D,right:I,x:A,y:_};t.current.element instanceof HTMLElement&&s&&(y.height=t.current.element.offsetHeight,y.width=t.current.element.offsetWidth),Object.freeze(y),h.current&&!te(t.current.lastBounds,y)&&i(t.current.lastBounds=y)};return[f,a?L(f,a):f,u?L(f,u):f]},[i,s,u,a]);function w(){t.current.scrollContainers&&(t.current.scrollContainers.forEach(f=>f.removeEventListener("scroll",g,!0)),t.current.scrollContainers=null),t.current.resizeObserver&&(t.current.resizeObserver.disconnect(),t.current.resizeObserver=null)}function N(){t.current.element&&(t.current.resizeObserver=new l(g),t.current.resizeObserver.observe(t.current.element),c&&t.current.scrollContainers&&t.current.scrollContainers.forEach(f=>f.addEventListener("scroll",g,{capture:!0,passive:!0})))}const R=f=>{!f||f===t.current.element||(w(),t.current.element=f,t.current.scrollContainers=S(f),N())};return Z(g,!!c),V(v),d.useEffect(()=>{w(),N()},[c,g,v]),d.useEffect(()=>w,[]),[R,m,p]}function V(n){d.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Z(n,e){d.useEffect(()=>{if(e){const c=n;return window.addEventListener("scroll",c,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",c,!0)}},[n,e])}function S(n){const e=[];if(!n||n===document.body)return e;const{overflow:c,overflowX:r,overflowY:s}=window.getComputedStyle(n);return[c,r,s].some(l=>l==="auto"||l==="scroll")&&e.push(n),[...e,...S(n.parentElement)]}const ee=["x","y","top","bottom","left","right","width","height"],te=(n,e)=>ee.every(c=>n[c]===e[c]),ne=[{label:"RU",code:"ru"}],re=({btnCn:n})=>{const{setLang:e,lang:c}=E();return o(F,{children:ne.map(({code:r,label:s})=>b("button",{onClick:()=>e(r),className:n,children:[o("img",{className:"w-5",src:`/assets/${r}.svg`}),s]},r))})},k=({navigate:n,isBurgerMenu:e})=>{const[c,r]=d.useState(!1),{t:s}=x(),{headerHeight:l}=E(),m=d.useRef(null),i=h=>{const p=document.getElementById("section_"+h);if(p&&l){const v=p.offsetTop;window.scrollTo({top:v-(l+120),behavior:"smooth"})}p||n("/")},t=h=>{var w;const p=(w=m.current)==null?void 0:w.contains(h.target),v=document.querySelector('[data-menu-trigger="true"]'),g=v==null?void 0:v.contains(h.target);g&&(r==null||r(!0)),!g&&!p&&(r==null||r(!1))};d.useEffect(()=>(e&&document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}),[e]);const u=e?{display:c?"flex":"none",padding:"1rem"}:{},a=e?"btn-secondary":"btn";return o("div",{ref:m,className:`vertical-nav-inner ${!e&&"bg-transparent"}`,style:{...u},children:b("div",{className:"flex gap-4 flex-col lg:flex-row lg:items-start",children:[o("button",{onClick:()=>i("about"),className:a,children:s("nav.menu_1")}),o("button",{onClick:()=>i("motopark"),className:a,children:s("nav.menu_2")}),o("button",{onClick:()=>i("terms"),className:a,children:s("nav.menu_3").split(" ")[0]}),o("button",{onClick:()=>i("contact"),className:a,children:s("nav.menu_4")}),o(re,{btnCn:a})]})})},se=()=>{const n=O(),{setHeaderHeight:e,headerHeight:c}=E(),[r,s]=K(),[l,m]=d.useState("static"),i=u=>{window.scrollY>=s.height?m("sm:fixed"):m("static")};d.useEffect(()=>(e(s.height),window.addEventListener("scroll",i),()=>{window.removeEventListener("scroll",i)}),[s.height]),x();const t=d.useMemo(()=>c!==void 0&&c>200?{justifyContent:"center"}:{},[c]);return o("header",{ref:r,className:`${l} top-0 w-full shadow-lg z-50 border-b-4 border-primary border-opacity-10`,style:{background:"url(../assets/back.jpg)"},children:o("div",{className:"max-w-screen-xl px-8 mx-auto",children:b("div",{style:{...t},className:"flex gap-6 items-center flex-wrap py-8 relative justify-between",children:[o("h2",{className:"text-3xl text-primary",children:o(U,{to:"/",children:o("img",{className:"w-32",src:"/assets/logo.png",alt:"BlackMoto.GE"})})}),o("div",{"data-menu-trigger":"true",className:"lg:hidden",children:o("button",{className:"btn",children:o(X,{})})}),o("div",{className:"hidden lg:block",children:o(k,{navigate:n})}),o("div",{className:"vertical-nav",style:{top:s.height+20},children:o(k,{isBurgerMenu:!0,navigate:n})})]})})})},oe=()=>{const{t:n}=x(),e=O();return o("footer",{className:"mt-auto py-8 container",children:b("div",{className:"footer text-lg md:text-xl",children:[b("p",{children:["Â© ",new Date().getFullYear(),", ",n("terms.copyright")]}),b("button",{onClick:()=>e("/admin"),className:"btn",children:[o(J,{width:20}),"Admin"]})]})})},ce="sergi.jajanidzee@gmail.com,mixo.ushba@gmail.com".split(","),fe=()=>{const{setUser:n,setItems:e,lang:c,headerHeight:r}=E();d.useEffect(()=>{const l=q(z,t=>{const u=t==null?void 0:t.email;if(u&&!ce.includes(u)){P(z),$.error("You have no access");return}t?(n(t),Q(t)):n(void 0)}),m=M(W("motos")),i=G(m,t=>{const u=[];t.forEach(a=>u.push(a.data())),e(u)});return()=>{l(),i()}},[]);const s=c==="ge"?"font-ge":"font-ru";return x(),b("div",{className:`app-wrapper ${s}`,children:[o(se,{}),o("div",{className:"mt-8 container",children:o(Y,{})}),o(oe,{})]})};export{fe as default};
