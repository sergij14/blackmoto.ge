import{r as d,u as y,j as r,F as $,a as b,b as O,L as F,O as U,Q as Y}from"./index-c72ca1d2.js";import{o as q,d as M,c as W,a as G,s as P,b as Q,e as z}from"./dbMethods-abd3c688.js";import{B as X,L as J}from"./index-fedf5ba0.js";import{u as E}from"./index-b37c192a.js";function N(n,e,o){var s,c,a,m,i;e==null&&(e=100);function t(){var l=Date.now()-m;l<e&&l>=0?s=setTimeout(t,e-l):(s=null,o||(i=n.apply(a,c),a=c=null))}var f=function(){a=this,c=arguments,m=Date.now();var l=o&&!s;return s||(s=setTimeout(t,e)),l&&(i=n.apply(a,c),a=c=null),i};return f.clear=function(){s&&(clearTimeout(s),s=null)},f.flush=function(){s&&(i=n.apply(a,c),a=c=null,clearTimeout(s),s=null)},f}N.debounce=N;var L=N;function K(n){let{debounce:e,scroll:o,polyfill:s,offsetSize:c}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const a=s||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[m,i]=d.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),t=d.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:m}),f=e?typeof e=="number"?e:e.scroll:null,l=e?typeof e=="number"?e:e.resize:null,h=d.useRef(!1);d.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,v]=d.useMemo(()=>{const u=()=>{if(!t.current.element)return;const{left:T,top:B,width:H,height:j,bottom:D,right:I,x:A,y:_}=t.current.element.getBoundingClientRect(),w={left:T,top:B,width:H,height:j,bottom:D,right:I,x:A,y:_};t.current.element instanceof HTMLElement&&c&&(w.height=t.current.element.offsetHeight,w.width=t.current.element.offsetWidth),Object.freeze(w),h.current&&!te(t.current.lastBounds,w)&&i(t.current.lastBounds=w)};return[u,l?L(u,l):u,f?L(u,f):u]},[i,c,f,l]);function x(){t.current.scrollContainers&&(t.current.scrollContainers.forEach(u=>u.removeEventListener("scroll",v,!0)),t.current.scrollContainers=null),t.current.resizeObserver&&(t.current.resizeObserver.disconnect(),t.current.resizeObserver=null)}function C(){t.current.element&&(t.current.resizeObserver=new a(v),t.current.resizeObserver.observe(t.current.element),o&&t.current.scrollContainers&&t.current.scrollContainers.forEach(u=>u.addEventListener("scroll",v,{capture:!0,passive:!0})))}const R=u=>{!u||u===t.current.element||(x(),t.current.element=u,t.current.scrollContainers=S(u),C())};return Z(v,!!o),V(g),d.useEffect(()=>{x(),C()},[o,v,g]),d.useEffect(()=>x,[]),[R,m,p]}function V(n){d.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Z(n,e){d.useEffect(()=>{if(e){const o=n;return window.addEventListener("scroll",o,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",o,!0)}},[n,e])}function S(n){const e=[];if(!n||n===document.body)return e;const{overflow:o,overflowX:s,overflowY:c}=window.getComputedStyle(n);return[o,s,c].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...S(n.parentElement)]}const ee=["x","y","top","bottom","left","right","width","height"],te=(n,e)=>ee.every(o=>n[o]===e[o]),ne=[{label:"RU",code:"ru"}],se=()=>{const{setLang:n,lang:e}=y();return r($,{children:ne.map(({code:o,label:s})=>b("button",{onClick:()=>n(o),className:`nav-btn bg-opacity-100 ${o===e?"opacity-100":"opacity-70"}`,children:[r("img",{className:"w-5",src:`/assets/${o}.svg`}),s]},o))})},k=({navigate:n,isBurgerMenu:e})=>{const[o,s]=d.useState(!1),{t:c}=E(),{headerHeight:a}=y(),m=d.useRef(null),i=l=>{const h=document.getElementById("section_"+l);if(h&&a){const p=h.offsetTop;window.scrollTo({top:p-(a+120),behavior:"smooth"})}h||n("/")},t=l=>{var v;const h=(v=m.current)==null?void 0:v.contains(l.target),p=document.querySelector('[data-menu-trigger="true"]'),g=p==null?void 0:p.contains(l.target);g&&(s==null||s(!0)),!g&&!h&&(s==null||s(!1))};return d.useEffect(()=>(e&&document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}),[e]),r("div",{ref:m,className:`vertical-nav-inner ${!e&&"bg-transparent"}`,style:{...e?{display:o?"flex":"none",padding:"1rem"}:{}},children:b("div",{className:"flex gap-2 flex-col md:flex-row md:items-start",children:[r("button",{onClick:()=>i("about"),className:"nav-btn",children:c("nav.menu_1")}),r("button",{onClick:()=>i("motopark"),className:"nav-btn",children:c("nav.menu_2")}),r("button",{onClick:()=>i("terms"),className:"nav-btn",children:c("nav.menu_3").split(" ")[0]}),r("button",{onClick:()=>i("contact"),className:"nav-btn",children:c("nav.menu_4")}),r(se,{})]})})},re=()=>{const n=O(),{setHeaderHeight:e}=y(),[o,s]=K(),[c,a]=d.useState("static"),m=i=>{window.scrollY>=s.height?a("fixed"):a("static")};return d.useEffect(()=>(e(s.height),window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}),[s.height]),E(),r("header",{ref:o,className:`${c} top-0 w-full bg-back-secondary bg-opacity-90 z-50`,children:r("div",{className:"max-w-screen-xl px-8 mx-auto",children:b("div",{className:"flex flex-col gap-4 flex-wrap items-center py-8 relative sm:flex-row sm:justify-between",children:[r("h2",{className:"text-3xl text-primary",children:r(F,{to:"/",children:r("img",{className:"w-28",src:"/assets/logo.png",alt:"BlackMoto.GE"})})}),r("div",{"data-menu-trigger":"true",className:"md:hidden",children:r("button",{className:"nav-btn",children:r(X,{})})}),r("div",{className:"hidden md:block",children:r(k,{navigate:n})}),r("div",{className:"vertical-nav",style:{top:s.height+20},children:r(k,{isBurgerMenu:!0,navigate:n})})]})})})},oe=()=>{const{t:n}=E(),e=O();return r("footer",{className:"mt-auto py-8 container",children:b("div",{className:"footer text-lg md:text-xl",children:[b("p",{children:["Â© ",new Date().getFullYear(),", ",n("terms.copyright")]}),b("button",{onClick:()=>e("/admin"),className:"nav-btn",children:[r(J,{width:20}),"Admin"]})]})})},ce="sergi.jajanidze@gmail.com,mixo.ushba@gmail.com".split(","),fe=()=>{const{setUser:n,setItems:e,lang:o,headerHeight:s}=y();d.useEffect(()=>{const a=q(z,t=>{const f=t==null?void 0:t.email;if(f&&!ce.includes(f)){P(z),Y.error("You have no access");return}t?(n(t),Q(t)):n(void 0)}),m=M(W("motos")),i=G(m,t=>{const f=[];t.forEach(l=>f.push(l.data())),e(f)});return()=>{a(),i()}},[]);const c=o==="ge"?"font-ge":"font-ru";return E(),b("div",{className:`app-wrapper ${c}`,children:[r(re,{}),r("img",{className:"app-bg",alt:"",src:"/assets/back.jpg"}),r("div",{className:"mt-8 container",children:r(U,{})}),r(oe,{})]})};export{fe as default};
