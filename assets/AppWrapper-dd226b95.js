import{r as d,u as y,j as o,F as A,a as b,b as M,L as U,O as Y,Q as $}from"./index-8ef3f0a6.js";import{o as q,d as F,c as W,a as G,s as P,b as Q,e as C}from"./dbMethods-a18e2784.js";import{B as X}from"./index-d0001ef6.js";import{u as z}from"./index-fbbe0411.js";function x(r,t,s){var n,c,l,m,i;t==null&&(t=100);function e(){var a=Date.now()-m;a<t&&a>=0?n=setTimeout(e,t-a):(n=null,s||(i=r.apply(l,c),l=c=null))}var f=function(){l=this,c=arguments,m=Date.now();var a=s&&!n;return n||(n=setTimeout(e,t)),a&&(i=r.apply(l,c),l=c=null),i};return f.clear=function(){n&&(clearTimeout(n),n=null)},f.flush=function(){n&&(i=r.apply(l,c),l=c=null,clearTimeout(n),n=null)},f}x.debounce=x;var L=x;function J(r){let{debounce:t,scroll:s,polyfill:n,offsetSize:c}=r===void 0?{debounce:0,scroll:!1,offsetSize:!1}:r;const l=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!l)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[m,i]=d.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),e=d.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:m}),f=t?typeof t=="number"?t:t.scroll:null,a=t?typeof t=="number"?t:t.resize:null,h=d.useRef(!1);d.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,v]=d.useMemo(()=>{const u=()=>{if(!e.current.element)return;const{left:R,top:T,width:B,height:H,bottom:j,right:D,x:I,y:_}=e.current.element.getBoundingClientRect(),w={left:R,top:T,width:B,height:H,bottom:j,right:D,x:I,y:_};e.current.element instanceof HTMLElement&&c&&(w.height=e.current.element.offsetHeight,w.width=e.current.element.offsetWidth),Object.freeze(w),h.current&&!ee(e.current.lastBounds,w)&&i(e.current.lastBounds=w)};return[u,a?L(u,a):u,f?L(u,f):u]},[i,c,f,a]);function E(){e.current.scrollContainers&&(e.current.scrollContainers.forEach(u=>u.removeEventListener("scroll",v,!0)),e.current.scrollContainers=null),e.current.resizeObserver&&(e.current.resizeObserver.disconnect(),e.current.resizeObserver=null)}function N(){e.current.element&&(e.current.resizeObserver=new l(v),e.current.resizeObserver.observe(e.current.element),s&&e.current.scrollContainers&&e.current.scrollContainers.forEach(u=>u.addEventListener("scroll",v,{capture:!0,passive:!0})))}const k=u=>{!u||u===e.current.element||(E(),e.current.element=u,e.current.scrollContainers=S(u),N())};return V(v,!!s),K(g),d.useEffect(()=>{E(),N()},[s,v,g]),d.useEffect(()=>E,[]),[k,m,p]}function K(r){d.useEffect(()=>{const t=r;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[r])}function V(r,t){d.useEffect(()=>{if(t){const s=r;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[r,t])}function S(r){const t=[];if(!r||r===document.body)return t;const{overflow:s,overflowX:n,overflowY:c}=window.getComputedStyle(r);return[s,n,c].some(l=>l==="auto"||l==="scroll")&&t.push(r),[...t,...S(r.parentElement)]}const Z=["x","y","top","bottom","left","right","width","height"],ee=(r,t)=>Z.every(s=>r[s]===t[s]),te=[{label:"RU",code:"ru"}],ne=()=>{const{setLang:r,lang:t}=y();return o(A,{children:te.map(({code:s,label:n})=>b("button",{onClick:()=>r(s),className:`nav-btn bg-opacity-100 ${s===t?"opacity-100":"opacity-70"}`,children:[o("img",{className:"w-5",src:`/assets/${s}.svg`}),n]},s))})},O=({navigate:r,isBurgerMenu:t})=>{const[s,n]=d.useState(!1),{t:c}=z(),{headerHeight:l}=y(),m=d.useRef(null),i=a=>{const h=document.getElementById("section_"+a);if(h&&l){const p=h.offsetTop;window.scrollTo({top:p-(l+120),behavior:"smooth"})}h||r("/")},e=a=>{var v;const h=(v=m.current)==null?void 0:v.contains(a.target),p=document.querySelector('[data-menu-trigger="true"]'),g=p==null?void 0:p.contains(a.target);g&&(n==null||n(!0)),!g&&!h&&(n==null||n(!1))};return d.useEffect(()=>(t&&document.addEventListener("click",e),()=>{document.removeEventListener("click",e)}),[t]),o("div",{ref:m,className:"vertical-nav-inner",style:{...t?{display:s?"flex":"none",padding:"1rem"}:{}},children:b("div",{className:"flex gap-2 flex-col md:flex-row md:items-start",children:[o("button",{onClick:()=>i("about"),className:"nav-btn",children:c("nav.menu_1")}),o("button",{onClick:()=>i("motopark"),className:"nav-btn",children:c("nav.menu_2")}),o("button",{onClick:()=>i("terms"),className:"nav-btn",children:c("nav.menu_3").split(" ")[0]}),o("button",{onClick:()=>i("contact"),className:"nav-btn",children:c("nav.menu_4")}),o(ne,{})]})})},re=()=>{const r=M(),{setHeaderHeight:t}=y(),[s,n]=J(),[c,l]=d.useState("static"),m=i=>{window.scrollY>=n.height?l("fixed"):l("static")};return d.useEffect(()=>(t(n.height),window.addEventListener("scroll",m),()=>{window.removeEventListener("scroll",m)}),[n.height]),z(),o("header",{ref:s,className:`${c} top-0 w-full bg-back-secondary bg-opacity-90 z-50`,children:o("div",{className:"max-w-screen-xl px-8 mx-auto",children:b("div",{className:"flex flex-col gap-4 flex-wrap items-center py-8 relative sm:flex-row sm:justify-between",children:[o("h2",{className:"text-3xl text-primary",children:o(U,{to:"/",children:"#BlackMoto.GE"})}),o("div",{"data-menu-trigger":"true",className:"md:hidden",children:o("button",{className:"nav-btn",children:o(X,{})})}),o("div",{className:"hidden md:block",children:o(O,{navigate:r})}),o("div",{className:"vertical-nav",style:{top:n.height+20},children:o(O,{isBurgerMenu:!0,navigate:r})})]})})})},se="sergi.jajanidze@gmail.com,mixo.ushba@gmail.com".split(","),ue=()=>{const{setUser:r,setItems:t,lang:s}=y();d.useEffect(()=>{const l=q(C,e=>{const f=e==null?void 0:e.email;if(f&&!se.includes(f)){P(C),$.error("You have no access");return}e?(r(e),Q(e)):r(void 0)}),m=F(W("motos")),i=G(m,e=>{const f=[];e.forEach(a=>f.push(a.data())),t(f)});return()=>{l(),i()}},[]);const n=s==="ge"?"font-ge":"font-ru",{t:c}=z();return b("div",{className:`app-wrapper ${n}`,children:[o(re,{}),b("div",{className:"container",children:[o("div",{className:"mt-8",children:o(Y,{})}),o("footer",{className:"mt-auto pb-8",children:b("div",{className:"footer text-lg md:text-xl",children:["Â© ",new Date().getFullYear(),", ",c("terms.copyright")]})})]})]})};export{ue as default};
