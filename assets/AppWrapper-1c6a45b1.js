import{r as u,u as y,j as o,F,a as b,b as O,L as M,O as U,Q as Y}from"./index-6a6828d4.js";import{o as $,d as q,c as W,a as G,s as P,b as Q,e as N}from"./dbMethods-88e306cd.js";import{B as X,L as J}from"./index-de630fbb.js";import{u as E}from"./index-11bd9a3c.js";function C(n,e,s){var r,l,a,f,c;e==null&&(e=100);function t(){var d=Date.now()-f;d<e&&d>=0?r=setTimeout(t,e-d):(r=null,s||(c=n.apply(a,l),a=l=null))}var m=function(){a=this,l=arguments,f=Date.now();var d=s&&!r;return r||(r=setTimeout(t,e)),d&&(c=n.apply(a,l),a=l=null),c};return m.clear=function(){r&&(clearTimeout(r),r=null)},m.flush=function(){r&&(c=n.apply(a,l),a=l=null,clearTimeout(r),r=null)},m}C.debounce=C;var L=C;function K(n){let{debounce:e,scroll:s,polyfill:r,offsetSize:l}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const a=r||(typeof window>"u"?class{}:window.ResizeObserver);if(!a)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[f,c]=u.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),t=u.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:f}),m=e?typeof e=="number"?e:e.scroll:null,d=e?typeof e=="number"?e:e.resize:null,h=u.useRef(!1);u.useEffect(()=>(h.current=!0,()=>void(h.current=!1)));const[p,g,v]=u.useMemo(()=>{const i=()=>{if(!t.current.element)return;const{left:T,top:B,width:H,height:j,bottom:D,right:I,x:A,y:_}=t.current.element.getBoundingClientRect(),w={left:T,top:B,width:H,height:j,bottom:D,right:I,x:A,y:_};t.current.element instanceof HTMLElement&&l&&(w.height=t.current.element.offsetHeight,w.width=t.current.element.offsetWidth),Object.freeze(w),h.current&&!te(t.current.lastBounds,w)&&c(t.current.lastBounds=w)};return[i,d?L(i,d):i,m?L(i,m):i]},[c,l,m,d]);function x(){t.current.scrollContainers&&(t.current.scrollContainers.forEach(i=>i.removeEventListener("scroll",v,!0)),t.current.scrollContainers=null),t.current.resizeObserver&&(t.current.resizeObserver.disconnect(),t.current.resizeObserver=null)}function z(){t.current.element&&(t.current.resizeObserver=new a(v),t.current.resizeObserver.observe(t.current.element),s&&t.current.scrollContainers&&t.current.scrollContainers.forEach(i=>i.addEventListener("scroll",v,{capture:!0,passive:!0})))}const R=i=>{!i||i===t.current.element||(x(),t.current.element=i,t.current.scrollContainers=S(i),z())};return Z(v,!!s),V(g),u.useEffect(()=>{x(),z()},[s,v,g]),u.useEffect(()=>x,[]),[R,f,p]}function V(n){u.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Z(n,e){u.useEffect(()=>{if(e){const s=n;return window.addEventListener("scroll",s,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",s,!0)}},[n,e])}function S(n){const e=[];if(!n||n===document.body)return e;const{overflow:s,overflowX:r,overflowY:l}=window.getComputedStyle(n);return[s,r,l].some(a=>a==="auto"||a==="scroll")&&e.push(n),[...e,...S(n.parentElement)]}const ee=["x","y","top","bottom","left","right","width","height"],te=(n,e)=>ee.every(s=>n[s]===e[s]),ne=[{label:"RU",code:"ru"}],re=()=>{const{setLang:n,lang:e}=y();return o(F,{children:ne.map(({code:s,label:r})=>b("button",{onClick:()=>n(s),className:`nav-btn bg-opacity-100 ${s===e?"opacity-100":"opacity-70"}`,children:[o("img",{className:"w-5",src:`/assets/${s}.svg`}),r]},s))})},k=({navigate:n,isBurgerMenu:e})=>{const[s,r]=u.useState(!1),{t:l}=E(),{headerHeight:a}=y(),f=u.useRef(null),c=d=>{const h=document.getElementById("section_"+d);if(h&&a){const p=h.offsetTop;window.scrollTo({top:p-(a+120),behavior:"smooth"})}h||n("/")},t=d=>{var v;const h=(v=f.current)==null?void 0:v.contains(d.target),p=document.querySelector('[data-menu-trigger="true"]'),g=p==null?void 0:p.contains(d.target);g&&(r==null||r(!0)),!g&&!h&&(r==null||r(!1))};return u.useEffect(()=>(e&&document.addEventListener("click",t),()=>{document.removeEventListener("click",t)}),[e]),o("div",{ref:f,className:"vertical-nav-inner",style:{...e?{display:s?"flex":"none",padding:"1rem"}:{}},children:b("div",{className:"flex gap-2 flex-col md:flex-row md:items-start",children:[o("button",{onClick:()=>c("about"),className:"nav-btn",children:l("nav.menu_1")}),o("button",{onClick:()=>c("motopark"),className:"nav-btn",children:l("nav.menu_2")}),o("button",{onClick:()=>c("terms"),className:"nav-btn",children:l("nav.menu_3").split(" ")[0]}),o("button",{onClick:()=>c("contact"),className:"nav-btn",children:l("nav.menu_4")}),o(re,{})]})})},se=()=>{const n=O(),{setHeaderHeight:e}=y(),[s,r]=K(),[l,a]=u.useState("static"),f=c=>{window.scrollY>=r.height?a("fixed"):a("static")};return u.useEffect(()=>(e(r.height),window.addEventListener("scroll",f),()=>{window.removeEventListener("scroll",f)}),[r.height]),E(),o("header",{ref:s,className:`${l} top-0 w-full bg-back-secondary bg-opacity-90 z-50`,children:o("div",{className:"max-w-screen-xl px-8 mx-auto",children:b("div",{className:"flex flex-col gap-4 flex-wrap items-center py-8 relative sm:flex-row sm:justify-between",children:[o("h2",{className:"text-3xl text-primary",children:o(M,{to:"/",children:"#BlackMoto.GE"})}),o("div",{"data-menu-trigger":"true",className:"md:hidden",children:o("button",{className:"nav-btn",children:o(X,{})})}),o("div",{className:"hidden md:block",children:o(k,{navigate:n})}),o("div",{className:"vertical-nav",style:{top:r.height+20},children:o(k,{isBurgerMenu:!0,navigate:n})})]})})})},oe=()=>{const{t:n}=E(),e=O();return o("footer",{className:"mt-auto py-8 container",children:b("div",{className:"footer text-lg md:text-xl",children:[b("p",{children:["Â© ",new Date().getFullYear(),", ",n("terms.copyright")]}),b("button",{onClick:()=>e("/admin"),className:"nav-btn",children:[o(J,{width:20}),"Admin"]})]})})},ce="sergi.jajanidze@gmail.com,mixo.ushba@gmail.com".split(","),fe=()=>{const{setUser:n,setItems:e,lang:s}=y();u.useEffect(()=>{const l=$(N,c=>{const t=c==null?void 0:c.email;if(t&&!ce.includes(t)){P(N),Y.error("You have no access");return}c?(n(c),Q(c)):n(void 0)}),a=q(W("motos")),f=G(a,c=>{const t=[];c.forEach(m=>t.push(m.data())),e(t)});return()=>{l(),f()}},[]);const r=s==="ge"?"font-ge":"font-ru";return E(),b("div",{className:`app-wrapper ${r}`,children:[o(se,{}),o("div",{className:"mt-8 container",children:o(U,{})}),o(oe,{})]})};export{fe as default};
